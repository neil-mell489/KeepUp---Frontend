{"ast":null,"code":"var _jsxFileName = \"/Users/neilmellstrom/Desktop/code/projects/project-4/KeepUp/KeepUp---Frontend/src/pages/Profile.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport EventForm from '../components/EventForm';\nimport Calendar from 'react-calendar';\nimport '../assets/css/styles.css';\nimport { useParams } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst URL = process.env.REACT_APP_URL;\nconst Profile = ({\n  loggedIn,\n  user\n}) => {\n  _s();\n  const [showEventForm, setShowEventForm] = useState(false);\n  const [events, setEvents] = useState([]);\n  const [date, setDate] = useState(new Date());\n  const [editingEvent, setEditingEvent] = useState(null);\n  const {\n    id\n  } = useParams();\n  useEffect(() => {\n    fetchEvents(); // Fetch events when component mounts\n  }, []);\n  const fetchEvents = async () => {\n    try {\n      const response = await fetch(`${URL}/api/events/${id}`, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      if (!response.ok) {\n        throw new Error(`HTTP error! Status: ${response.status}`);\n      }\n      const jsonResponse = await response.json();\n      const eventsData = jsonResponse.data;\n      if (Array.isArray(eventsData)) {\n        setEvents(eventsData);\n      } else {\n        console.error('Expected an array of events, but got:', eventsData);\n        setEvents([]);\n      }\n    } catch (error) {\n      console.error('Error fetching events:', error);\n      setEvents([]);\n    }\n  };\n  const handleCreateEvent = async () => {\n    setShowEventForm(true);\n    setEditingEvent(null);\n  };\n  const handleEditEvent = event => {\n    setShowEventForm(true);\n    setEditingEvent(event);\n  };\n  const handleDeleteEvent = async id => {\n    try {\n      const response = await fetch(`${URL}/api/events/${id}`, {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      if (!response.ok) {\n        throw new Error('Failed to delete event');\n      }\n\n      // Refetch events after deleting an event\n      fetchEvents();\n    } catch (error) {\n      console.error('Error deleting event:', error);\n    }\n  };\n  const handleEventFormSubmit = () => {\n    fetchEvents();\n    setShowEventForm(false);\n    setEditingEvent(null);\n  };\n  const convertTo12HourTime = time24 => {\n    const [hours, minutes] = time24.split(':');\n    const period = hours >= 12 ? 'PM' : 'AM';\n    const hours12 = hours % 12 || 12;\n    return `${hours12}:${minutes} ${period}`;\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-center font-extrabold text-3xl\",\n      children: \"KeepUp CALENDAR\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"bg-violet-500 hover:bg-violet-600 text-white p-2 rounded-md m-3\",\n      onClick: handleCreateEvent,\n      children: \"Create Event\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this), showEventForm && /*#__PURE__*/_jsxDEV(EventForm, {\n      setShowEventForm: setShowEventForm,\n      onSubmit: handleEventFormSubmit,\n      event: editingEvent,\n      user: user\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 25\n    }, this), /*#__PURE__*/_jsxDEV(Calendar, {\n      onChange: setDate,\n      value: date,\n      tileContent: ({\n        date,\n        view\n      }) => {\n        const offset = date.getTimezoneOffset() * 60000; // Get offset in milliseconds\n        const dayEvents = events === null || events === void 0 ? void 0 : events.filter(event => new Date(event.date).getTime() + offset >= date.getTime() &&\n        // Adjust for timezone offset\n        new Date(event.date).getTime() + offset < date.getTime() + 86400000 // 86400000 milliseconds = 1 day\n        );\n        return /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: dayEvents.map((event, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-wrap\",\n                children: event.eventName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 110,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-wrap\",\n                children: convertTo12HourTime(event.time)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 111,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-pretty\",\n                children: event.description\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 112,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex flex-wrap justify-center\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => handleEditEvent(event),\n                  className: \"bg-violet-500 hover:bg-violet-600 text-white p-2 rounded-md m-3\",\n                  children: \"Edit\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 114,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => handleDeleteEvent(event._id),\n                  className: \"bg-violet-500 hover:bg-violet-600 text-white p-2 rounded-md m-3\",\n                  children: \"Delete\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 115,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 113,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 19\n            }, this)\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 13\n        }, this);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 92,\n    columnNumber: 5\n  }, this);\n};\n_s(Profile, \"LkklayUh2I0SkTCRzqnnkBbzsN0=\", false, function () {\n  return [useParams];\n});\n_c = Profile;\nexport default Profile;\nvar _c;\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"names":["React","useState","useEffect","EventForm","Calendar","useParams","jsxDEV","_jsxDEV","URL","process","env","REACT_APP_URL","Profile","loggedIn","user","_s","showEventForm","setShowEventForm","events","setEvents","date","setDate","Date","editingEvent","setEditingEvent","id","fetchEvents","response","fetch","method","headers","ok","Error","status","jsonResponse","json","eventsData","data","Array","isArray","console","error","handleCreateEvent","handleEditEvent","event","handleDeleteEvent","handleEventFormSubmit","convertTo12HourTime","time24","hours","minutes","split","period","hours12","children","className","fileName","_jsxFileName","lineNumber","columnNumber","onClick","onSubmit","onChange","value","tileContent","view","offset","getTimezoneOffset","dayEvents","filter","getTime","map","index","eventName","time","description","_id","_c","$RefreshReg$"],"sources":["/Users/neilmellstrom/Desktop/code/projects/project-4/KeepUp/KeepUp---Frontend/src/pages/Profile.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport EventForm from '../components/EventForm';\nimport Calendar from 'react-calendar';\nimport '../assets/css/styles.css';\nimport { useParams } from 'react-router-dom';\n\nconst URL = process.env.REACT_APP_URL;\n\nconst Profile = ({ loggedIn, user }) => {\n  const [showEventForm, setShowEventForm] = useState(false);\n  const [events, setEvents] = useState([]);\n  const [date, setDate] = useState(new Date());\n  const [editingEvent, setEditingEvent] = useState(null);\n  const { id } = useParams();\n\n\n  useEffect(() => {\n    fetchEvents(); // Fetch events when component mounts\n  }, []);\n\n  const fetchEvents = async () => {\n    try {\n      const response = await fetch(`${URL}/api/events/${id}`, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      });\n      if (!response.ok) {\n        throw new Error(`HTTP error! Status: ${response.status}`);\n      }\n\n      const jsonResponse = await response.json();\n      const eventsData = jsonResponse.data;\n\n      if (Array.isArray(eventsData)) {\n        setEvents(eventsData);\n      } else {\n        console.error('Expected an array of events, but got:', eventsData);\n        setEvents([]);\n      }\n    } catch (error) {\n      console.error('Error fetching events:', error);\n      setEvents([]);\n    }\n  };\n\n  const handleCreateEvent = async () => {\n    setShowEventForm(true);\n    setEditingEvent(null);\n  };\n\n  const handleEditEvent = (event) => {\n    setShowEventForm(true);\n    setEditingEvent(event);\n  };\n\n  const handleDeleteEvent = async (id) => {\n    try {\n      const response = await fetch(`${URL}/api/events/${id}`, {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to delete event');\n      }\n\n      // Refetch events after deleting an event\n      fetchEvents();\n    } catch (error) {\n      console.error('Error deleting event:', error);\n    }\n  };\n\n  const handleEventFormSubmit = () => {\n    fetchEvents();\n    setShowEventForm(false);\n    setEditingEvent(null);\n  };\n\n  const convertTo12HourTime = (time24) => {\n    const [hours, minutes] = time24.split(':');\n    const period = hours >= 12 ? 'PM' : 'AM';\n    const hours12 = hours % 12 || 12;\n    return `${hours12}:${minutes} ${period}`;\n  };\n\n  return (\n    <div>\n      <h1 className='text-center font-extrabold text-3xl'>KeepUp CALENDAR</h1>\n      <button className=\"bg-violet-500 hover:bg-violet-600 text-white p-2 rounded-md m-3\" onClick={handleCreateEvent}>Create Event</button>\n      {showEventForm && <EventForm setShowEventForm={setShowEventForm} onSubmit={handleEventFormSubmit} event={editingEvent} user={user} />}\n      <Calendar\n        onChange={setDate}\n        value={date}\n        tileContent={({ date, view }) => {\n          const offset = date.getTimezoneOffset() * 60000; // Get offset in milliseconds\n          const dayEvents = events?.filter(event =>\n            new Date(event.date).getTime() + offset >= date.getTime() && // Adjust for timezone offset\n            new Date(event.date).getTime() + offset < date.getTime() + 86400000 // 86400000 milliseconds = 1 day\n          );\n          return (\n            <ul>\n              {dayEvents.map((event, index) => (\n                <li key={index}>\n                  <div>\n                    <span className='text-wrap'>{event.eventName}</span>\n                    <div className='text-wrap'>{convertTo12HourTime(event.time)}</div>\n                    <span className='text-pretty'>{event.description}</span>                      \n                    <div className=\"flex flex-wrap justify-center\">\n                      <button onClick={() => handleEditEvent(event)} className=\"bg-violet-500 hover:bg-violet-600 text-white p-2 rounded-md m-3\">Edit</button>\n                      <button onClick={() => handleDeleteEvent(event._id)} className=\"bg-violet-500 hover:bg-violet-600 text-white p-2 rounded-md m-3\">Delete</button>\n                    </div>\n                  </div>\n                </li>\n              ))}\n            </ul>\n          );\n        }}\n      />\n    </div>\n  );\n};\n\nexport default Profile;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}